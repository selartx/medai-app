"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/ai";
exports.ids = ["pages/api/ai"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fai&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cai.ts&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fai&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cai.ts&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   handler: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/api-utils */ \"(api-node)/./node_modules/next/dist/server/api-utils/index.js\");\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_ai_ts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./src\\pages\\api\\ai.ts */ \"(api-node)/./src/pages/api/ai.ts\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(api-node)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(api-node)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_ai_ts__WEBPACK_IMPORTED_MODULE_4__]);\n_src_pages_api_ai_ts__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// Import the userland code.\n\n\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_src_pages_api_ai_ts__WEBPACK_IMPORTED_MODULE_4__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_src_pages_api_ai_ts__WEBPACK_IMPORTED_MODULE_4__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/ai\",\n        pathname: \"/api/ai\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _src_pages_api_ai_ts__WEBPACK_IMPORTED_MODULE_4__,\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    let srcPage = \"/api/ai\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {}\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest, routerServerContext } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.getTracer)();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: [],\n                multiZoneDraftMode: Boolean(false),\n                trustHostHeader: false,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/ai\",\n                internalRevalidate: routerServerContext == null ? void 0 : routerServerContext.revalidate,\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        (0,next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__.sendError)(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGYWkmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlNUNwYWdlcyU1Q2FwaSU1Q2FpLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUNDO0FBQ3VDO0FBQ3JDO0FBQzFEO0FBQ3FEO0FBQ21CO0FBQ0Y7QUFDdEU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGlEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxpREFBUTtBQUNwQztBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLGFBQWEsT0FBb0MsSUFBSSxDQUFFO0FBQ3ZELHdCQUF3QixNQUF1QztBQUMvRCxDQUFDO0FBQ007QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsS0FBcUIsRUFBRSxFQUUxQjtBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3REFBd0Q7QUFDcEU7QUFDQTtBQUNBLHVCQUF1Qiw0RUFBUztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSw2Q0FBNkMsRUFBNkM7QUFDMUYsNENBQTRDLEtBQXdDO0FBQ3BGLGlDQUFpQyxLQUFvQztBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsZ0ZBQWM7QUFDL0UsK0RBQStELHlDQUF5QztBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxRQUFRLEVBQUUsTUFBTTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGtCQUFrQjtBQUNsQix1Q0FBdUMsUUFBUSxFQUFFLFFBQVE7QUFDekQ7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNkVBQTZFLGdGQUFjO0FBQzNGLGlDQUFpQyxRQUFRLEVBQUUsUUFBUTtBQUNuRCwwQkFBMEIsdUVBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxRUFBUztBQUNqQixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2VuZEVycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYXBpLXV0aWxzXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyY1xcXFxwYWdlc1xcXFxhcGlcXFxcYWkudHNcIjtcbmltcG9ydCB7IGdldFRyYWNlciwgU3BhbktpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvdHJhY2VyXCI7XG5pbXBvcnQgeyBCYXNlU2VydmVyU3BhbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS9jb25zdGFudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWlcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9haVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kLFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJ1xufSk7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgbGV0IHNyY1BhZ2UgPSBcIi9hcGkvYWlcIjtcbiAgICAvLyB0dXJib3BhY2sgZG9lc24ndCBub3JtYWxpemUgYC9pbmRleGAgaW4gdGhlIHBhZ2UgbmFtZVxuICAgIC8vIHNvIHdlIG5lZWQgdG8gdG8gcHJvY2VzcyBkeW5hbWljIHJvdXRlcyBwcm9wZXJseVxuICAgIC8vIFRPRE86IGZpeCB0dXJib3BhY2sgcHJvdmlkaW5nIGRpZmZlcmluZyB2YWx1ZSBmcm9tIHdlYnBhY2tcbiAgICBpZiAocHJvY2Vzcy5lbnYuVFVSQk9QQUNLKSB7XG4gICAgICAgIHNyY1BhZ2UgPSBzcmNQYWdlLnJlcGxhY2UoL1xcL2luZGV4JC8sICcnKSB8fCAnLyc7XG4gICAgfVxuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2VcbiAgICB9KTtcbiAgICBpZiAoIXByZXBhcmVSZXN1bHQpIHtcbiAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDA7XG4gICAgICAgIHJlcy5lbmQoJ0JhZCBSZXF1ZXN0Jyk7XG4gICAgICAgIGN0eC53YWl0VW50aWwgPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC53YWl0VW50aWwuY2FsbChjdHgsIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IHF1ZXJ5LCBwYXJhbXMsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0IH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgICAgIGNvbnN0IHRyYWNlciA9IGdldFRyYWNlcigpO1xuICAgICAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgICAgICBjb25zdCBvblJlcXVlc3RFcnJvciA9IHJvdXRlTW9kdWxlLmluc3RydW1lbnRhdGlvbk9uUmVxdWVzdEVycm9yLmJpbmQocm91dGVNb2R1bGUpO1xuICAgICAgICBjb25zdCBpbnZva2VSb3V0ZU1vZHVsZSA9IGFzeW5jIChzcGFuKT0+cm91dGVNb2R1bGUucmVuZGVyKHJlcSwgcmVzLCB7XG4gICAgICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucXVlcnksXG4gICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtc1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRSZXZhbGlkYXRlSGVhZGVyS2V5czogcHJvY2Vzcy5lbnYuX19ORVhUX0FMTE9XRURfUkVWQUxJREFURV9IRUFERVJTLFxuICAgICAgICAgICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZTogQm9vbGVhbihwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFKSxcbiAgICAgICAgICAgICAgICB0cnVzdEhvc3RIZWFkZXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9UUlVTVF9IT1NUX0hFQURFUixcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBnZXQgdGhpcyBmcm9tIGZyb20gcnVudGltZSBlbnYgc28gbWFuaWZlc3RcbiAgICAgICAgICAgICAgICAvLyBkb2Vzbid0IG5lZWQgdG8gbG9hZFxuICAgICAgICAgICAgICAgIHByZXZpZXdQcm9wczogcHJlcmVuZGVyTWFuaWZlc3QucHJldmlldyxcbiAgICAgICAgICAgICAgICBwcm9wYWdhdGVFcnJvcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGV2OiByb3V0ZU1vZHVsZS5pc0RldixcbiAgICAgICAgICAgICAgICBwYWdlOiBcIi9hcGkvYWlcIixcbiAgICAgICAgICAgICAgICBpbnRlcm5hbFJldmFsaWRhdGU6IHJvdXRlclNlcnZlckNvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclNlcnZlckNvbnRleHQucmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICBvbkVycm9yOiAoLi4uYXJncyk9Pm9uUmVxdWVzdEVycm9yKHJlcSwgLi4uYXJncylcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGludm9rZVJvdXRlTW9kdWxlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gd2UgcmUtdGhyb3cgaW4gZGV2IHRvIHNob3cgdGhlIGVycm9yIG92ZXJsYXlcbiAgICAgICAgaWYgKHJvdXRlTW9kdWxlLmlzRGV2KSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcyBpcyB0ZWNobmljYWxseSBhbiBpbnZhcmlhbnQgYXMgZXJyb3IgaGFuZGxpbmdcbiAgICAgICAgLy8gc2hvdWxkIGJlIGRvbmUgaW5zaWRlIG9mIGFwaS1yZXNvbHZlciBvbkVycm9yXG4gICAgICAgIHNlbmRFcnJvcihyZXMsIDUwMCwgJ0ludGVybmFsIFNlcnZlciBFcnJvcicpO1xuICAgIH0gZmluYWxseXtcbiAgICAgICAgLy8gV2UgZG9uJ3QgYWxsb3cgYW55IHdhaXRVbnRpbCB3b3JrIGluIHBhZ2VzIEFQSSByb3V0ZXMgY3VycmVudGx5XG4gICAgICAgIC8vIHNvIGlmIGNhbGxiYWNrIGlzIHByZXNlbnQgcmV0dXJuIHdpdGggcmVzb2x2ZWQgcHJvbWlzZSBzaW5jZSBub1xuICAgICAgICAvLyBwZW5kaW5nIHdvcmtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fai&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cai.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./src/pages/api/ai.ts":
/*!*****************************!*\
  !*** ./src/pages/api/ai.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_aiHelper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/aiHelper */ \"(api-node)/./src/utils/aiHelper.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_utils_aiHelper__WEBPACK_IMPORTED_MODULE_0__]);\n_utils_aiHelper__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst handler = async (req, res)=>{\n    if (req.method === 'POST') {\n        const { input, conversationHistory } = req.body;\n        // Debug logging\n        console.log('API Key available:', !!\"AIzaSyD1I3tbuIVdv20h7IMmU8JWA7-YR0Ce1xs\");\n        console.log('API Key length:', \"AIzaSyD1I3tbuIVdv20h7IMmU8JWA7-YR0Ce1xs\"?.length || 0);\n        console.log('Input received:', input);\n        console.log('Conversation history length:', conversationHistory?.length || 0);\n        // Validate input\n        if (!input || !(0,_utils_aiHelper__WEBPACK_IMPORTED_MODULE_0__.validateInput)(input)) {\n            return res.status(400).json({\n                error: 'Invalid input. Please provide a valid question (1-1000 characters).'\n            });\n        }\n        // Build conversation history including the new user message\n        const messages = conversationHistory || [];\n        messages.push({\n            role: 'user',\n            content: input\n        });\n        try {\n            const aiResponse = await (0,_utils_aiHelper__WEBPACK_IMPORTED_MODULE_0__.generateResponse)(messages);\n            console.log('AI Response generated successfully');\n            res.status(200).json({\n                success: true,\n                response: aiResponse\n            });\n        } catch (error) {\n            console.error('AI API error:', error);\n            console.error('Error details:', {\n                message: error instanceof Error ? error.message : String(error),\n                stack: error instanceof Error ? error.stack : undefined,\n                name: error instanceof Error ? error.name : 'Unknown'\n            });\n            // Provide specific error messages based on error type\n            let errorMessage = 'Sorry, I encountered an error. Please try again.';\n            if (error instanceof Error) {\n                if (error.message.includes('overloaded') || error.message.includes('temporarily overloaded')) {\n                    errorMessage = 'I\\'m experiencing high demand right now. Please wait a moment and try again.';\n                } else if (error.message.includes('API key')) {\n                    errorMessage = 'There\\'s an issue with the AI service configuration. Please contact support.';\n                } else if (error.message.includes('network') || error.message.includes('fetch')) {\n                    errorMessage = 'I\\'m having trouble connecting to the AI service. Please check your internet connection and try again.';\n                }\n            }\n            res.status(500).json({\n                success: false,\n                error: errorMessage,\n                retry: error instanceof Error && error.message.includes('overloaded')\n            });\n        }\n    } else {\n        res.setHeader('Allow', [\n            'POST'\n        ]);\n        res.status(405).json({\n            error: `Method ${req.method} Not Allowed`\n        });\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handler);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9wYWdlcy9hcGkvYWkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDb0Y7QUFFcEYsTUFBTUUsVUFBVSxPQUFPQyxLQUFxQkM7SUFDeEMsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLFFBQVE7UUFDdkIsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLG1CQUFtQixFQUFFLEdBQUdKLElBQUlLLElBQUk7UUFFL0MsZ0JBQWdCO1FBQ2hCQyxRQUFRQyxHQUFHLENBQUMsc0JBQXNCLENBQUMsQ0FBQ0MseUNBQTBCO1FBQzlERixRQUFRQyxHQUFHLENBQUMsbUJBQW1CQyx5Q0FBMEIsRUFBRUcsVUFBVTtRQUNyRUwsUUFBUUMsR0FBRyxDQUFDLG1CQUFtQko7UUFDL0JHLFFBQVFDLEdBQUcsQ0FBQyxnQ0FBZ0NILHFCQUFxQk8sVUFBVTtRQUUzRSxpQkFBaUI7UUFDakIsSUFBSSxDQUFDUixTQUFTLENBQUNMLDhEQUFhQSxDQUFDSyxRQUFRO1lBQ2pDLE9BQU9GLElBQUlXLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQ3hCQyxPQUFPO1lBQ1g7UUFDSjtRQUVBLDREQUE0RDtRQUM1RCxNQUFNQyxXQUEwQlgsdUJBQXVCLEVBQUU7UUFDekRXLFNBQVNDLElBQUksQ0FBQztZQUFFQyxNQUFNO1lBQVFDLFNBQVNmO1FBQU07UUFFN0MsSUFBSTtZQUNBLE1BQU1nQixhQUFhLE1BQU10QixpRUFBZ0JBLENBQUNrQjtZQUMxQ1QsUUFBUUMsR0FBRyxDQUFDO1lBQ1pOLElBQUlXLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQ2pCTyxTQUFTO2dCQUNUQyxVQUFVRjtZQUNkO1FBQ0osRUFBRSxPQUFPTCxPQUFPO1lBQ1pSLFFBQVFRLEtBQUssQ0FBQyxpQkFBaUJBO1lBQy9CUixRQUFRUSxLQUFLLENBQUMsa0JBQWtCO2dCQUM1QlEsU0FBU1IsaUJBQWlCUyxRQUFRVCxNQUFNUSxPQUFPLEdBQUdFLE9BQU9WO2dCQUN6RFcsT0FBT1gsaUJBQWlCUyxRQUFRVCxNQUFNVyxLQUFLLEdBQUdDO2dCQUM5Q0MsTUFBTWIsaUJBQWlCUyxRQUFRVCxNQUFNYSxJQUFJLEdBQUc7WUFDaEQ7WUFFQSxzREFBc0Q7WUFDdEQsSUFBSUMsZUFBZTtZQUVuQixJQUFJZCxpQkFBaUJTLE9BQU87Z0JBQ3hCLElBQUlULE1BQU1RLE9BQU8sQ0FBQ08sUUFBUSxDQUFDLGlCQUFpQmYsTUFBTVEsT0FBTyxDQUFDTyxRQUFRLENBQUMsMkJBQTJCO29CQUMxRkQsZUFBZTtnQkFDbkIsT0FBTyxJQUFJZCxNQUFNUSxPQUFPLENBQUNPLFFBQVEsQ0FBQyxZQUFZO29CQUMxQ0QsZUFBZTtnQkFDbkIsT0FBTyxJQUFJZCxNQUFNUSxPQUFPLENBQUNPLFFBQVEsQ0FBQyxjQUFjZixNQUFNUSxPQUFPLENBQUNPLFFBQVEsQ0FBQyxVQUFVO29CQUM3RUQsZUFBZTtnQkFDbkI7WUFDSjtZQUVBM0IsSUFBSVcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDakJPLFNBQVM7Z0JBQ1ROLE9BQU9jO2dCQUNQRSxPQUFPaEIsaUJBQWlCUyxTQUFTVCxNQUFNUSxPQUFPLENBQUNPLFFBQVEsQ0FBQztZQUM1RDtRQUNKO0lBQ0osT0FBTztRQUNINUIsSUFBSThCLFNBQVMsQ0FBQyxTQUFTO1lBQUM7U0FBTztRQUMvQjlCLElBQUlXLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDakJDLE9BQU8sQ0FBQyxPQUFPLEVBQUVkLElBQUlFLE1BQU0sQ0FBQyxZQUFZLENBQUM7UUFDN0M7SUFDSjtBQUNKO0FBRUEsaUVBQWVILE9BQU9BLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbXVzdGFcXERlc2t0b3BcXG1lZGFpLWFwcFxcc3JjXFxwYWdlc1xcYXBpXFxhaS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCB7IGdlbmVyYXRlUmVzcG9uc2UsIHZhbGlkYXRlSW5wdXQsIENoYXRNZXNzYWdlIH0gZnJvbSAnLi4vLi4vdXRpbHMvYWlIZWxwZXInO1xyXG5cclxuY29uc3QgaGFuZGxlciA9IGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xyXG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJykge1xyXG4gICAgICAgIGNvbnN0IHsgaW5wdXQsIGNvbnZlcnNhdGlvbkhpc3RvcnkgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgICAgICAvLyBEZWJ1ZyBsb2dnaW5nXHJcbiAgICAgICAgY29uc29sZS5sb2coJ0FQSSBLZXkgYXZhaWxhYmxlOicsICEhcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdBUEkgS2V5IGxlbmd0aDonLCBwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWT8ubGVuZ3RoIHx8IDApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdJbnB1dCByZWNlaXZlZDonLCBpbnB1dCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0NvbnZlcnNhdGlvbiBoaXN0b3J5IGxlbmd0aDonLCBjb252ZXJzYXRpb25IaXN0b3J5Py5sZW5ndGggfHwgMCk7XHJcblxyXG4gICAgICAgIC8vIFZhbGlkYXRlIGlucHV0XHJcbiAgICAgICAgaWYgKCFpbnB1dCB8fCAhdmFsaWRhdGVJbnB1dChpbnB1dCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgaW5wdXQuIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgcXVlc3Rpb24gKDEtMTAwMCBjaGFyYWN0ZXJzKS4nIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEJ1aWxkIGNvbnZlcnNhdGlvbiBoaXN0b3J5IGluY2x1ZGluZyB0aGUgbmV3IHVzZXIgbWVzc2FnZVxyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzOiBDaGF0TWVzc2FnZVtdID0gY29udmVyc2F0aW9uSGlzdG9yeSB8fCBbXTtcclxuICAgICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBpbnB1dCB9KTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgYWlSZXNwb25zZSA9IGF3YWl0IGdlbmVyYXRlUmVzcG9uc2UobWVzc2FnZXMpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQUkgUmVzcG9uc2UgZ2VuZXJhdGVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlOiBhaVJlc3BvbnNlIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBSSBBUEkgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZXRhaWxzOicsIHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcclxuICAgICAgICAgICAgICAgIHN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubmFtZSA6ICdVbmtub3duJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFByb3ZpZGUgc3BlY2lmaWMgZXJyb3IgbWVzc2FnZXMgYmFzZWQgb24gZXJyb3IgdHlwZVxyXG4gICAgICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gJ1NvcnJ5LCBJIGVuY291bnRlcmVkIGFuIGVycm9yLiBQbGVhc2UgdHJ5IGFnYWluLic7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ292ZXJsb2FkZWQnKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCd0ZW1wb3JhcmlseSBvdmVybG9hZGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSAnSVxcJ20gZXhwZXJpZW5jaW5nIGhpZ2ggZGVtYW5kIHJpZ2h0IG5vdy4gUGxlYXNlIHdhaXQgYSBtb21lbnQgYW5kIHRyeSBhZ2Fpbi4nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdBUEkga2V5JykpIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSAnVGhlcmVcXCdzIGFuIGlzc3VlIHdpdGggdGhlIEFJIHNlcnZpY2UgY29uZmlndXJhdGlvbi4gUGxlYXNlIGNvbnRhY3Qgc3VwcG9ydC4nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCduZXR3b3JrJykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnZmV0Y2gnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICdJXFwnbSBoYXZpbmcgdHJvdWJsZSBjb25uZWN0aW5nIHRvIHRoZSBBSSBzZXJ2aWNlLiBQbGVhc2UgY2hlY2sgeW91ciBpbnRlcm5ldCBjb25uZWN0aW9uIGFuZCB0cnkgYWdhaW4uJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcclxuICAgICAgICAgICAgICAgIHJldHJ5OiBlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ292ZXJsb2FkZWQnKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgWydQT1NUJ10pO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgXHJcbiAgICAgICAgICAgIGVycm9yOiBgTWV0aG9kICR7cmVxLm1ldGhvZH0gTm90IEFsbG93ZWRgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgaGFuZGxlcjsiXSwibmFtZXMiOlsiZ2VuZXJhdGVSZXNwb25zZSIsInZhbGlkYXRlSW5wdXQiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwiaW5wdXQiLCJjb252ZXJzYXRpb25IaXN0b3J5IiwiYm9keSIsImNvbnNvbGUiLCJsb2ciLCJwcm9jZXNzIiwiZW52IiwiR0VNSU5JX0FQSV9LRVkiLCJsZW5ndGgiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJtZXNzYWdlcyIsInB1c2giLCJyb2xlIiwiY29udGVudCIsImFpUmVzcG9uc2UiLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJtZXNzYWdlIiwiRXJyb3IiLCJTdHJpbmciLCJzdGFjayIsInVuZGVmaW5lZCIsIm5hbWUiLCJlcnJvck1lc3NhZ2UiLCJpbmNsdWRlcyIsInJldHJ5Iiwic2V0SGVhZGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/pages/api/ai.ts\n");

/***/ }),

/***/ "(api-node)/./src/utils/aiHelper.ts":
/*!*******************************!*\
  !*** ./src/utils/aiHelper.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateResponse: () => (/* binding */ generateResponse),\n/* harmony export */   validateInput: () => (/* binding */ validateInput)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"@google/generative-ai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_google_generative_ai__WEBPACK_IMPORTED_MODULE_0__]);\n_google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Initialize the Gemini AI with your API key\nconst genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(\"AIzaSyD1I3tbuIVdv20h7IMmU8JWA7-YR0Ce1xs\" || 0);\n// Sleep function for retry logic\nconst sleep = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));\nconst generateResponse = async (conversationHistory)=>{\n    const maxRetries = 3;\n    const baseDelay = 1000; // 1 second\n    for(let attempt = 1; attempt <= maxRetries; attempt++){\n        try {\n            console.log(`Starting AI response generation (attempt ${attempt}/${maxRetries})...`);\n            console.log('API Key present:', !!\"AIzaSyD1I3tbuIVdv20h7IMmU8JWA7-YR0Ce1xs\");\n            console.log('Conversation history length:', conversationHistory.length);\n            // Get the generative model with optimized settings\n            const model = genAI.getGenerativeModel({\n                model: 'gemini-1.5-flash',\n                generationConfig: {\n                    temperature: 0.7,\n                    topK: 40,\n                    topP: 0.95,\n                    maxOutputTokens: 1000\n                }\n            });\n            console.log('Model created successfully');\n            // Build conversation context with recent history (last 10 messages to avoid token limits)\n            const recentHistory = conversationHistory.slice(-10);\n            // Create a prompt with conversation context\n            let conversationText = '';\n            recentHistory.forEach((msg)=>{\n                if (msg.role === 'user') {\n                    conversationText += `Student: ${msg.content}\\n`;\n                } else {\n                    conversationText += `MedAI: ${msg.content}\\n`;\n                }\n            });\n            const prompt = `You are MedAI, a medical education AI assistant. Maintain conversation context and give concise, accurate answers.\n\nPrevious conversation:\n${conversationText}\n\nPlease respond as MedAI to continue this medical education conversation:`;\n            console.log('Calling generateContent...');\n            const result = await model.generateContent(prompt);\n            console.log('generateContent completed');\n            const response = await result.response;\n            console.log('Response extracted');\n            const text = response.text();\n            console.log('Text extracted, length:', text.length);\n            return text;\n        } catch (error) {\n            console.error(`Error on attempt ${attempt}:`, error);\n            console.error('Error type:', error?.constructor?.name);\n            console.error('Error message:', error instanceof Error ? error.message : String(error));\n            // Check if this is a retryable error (503 Service Unavailable)\n            const isRetryable = error?.message?.includes('503') || error?.message?.includes('Service Unavailable') || error?.message?.includes('overloaded');\n            if (isRetryable && attempt < maxRetries) {\n                const delay = baseDelay * Math.pow(2, attempt - 1); // Exponential backoff\n                console.log(`Retrying in ${delay}ms...`);\n                await sleep(delay);\n                continue;\n            }\n            // If not retryable or max retries reached, throw error\n            if (isRetryable) {\n                throw new Error('The AI service is temporarily overloaded. Please wait a moment and try again.');\n            } else {\n                throw new Error('Failed to generate AI response. Please try again.');\n            }\n        }\n    }\n    throw new Error('Failed to generate response after multiple attempts.');\n};\nconst validateInput = (input)=>{\n    // Basic validation for user input\n    return input.trim().length > 0 && input.trim().length <= 1000; // Add max length\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNILE1BQU0sSUFBSUEsTUFBTTtZQUNwQjtRQUNKO0lBQ0o7SUFFQSxNQUFNLElBQUlBLE1BQU07QUFDcEIsRUFBRTtBQUVLLE1BQU1RLGdCQUFnQixDQUFDQztJQUMxQixrQ0FBa0M7SUFDbEMsT0FBT0EsTUFBTUMsSUFBSSxHQUFHaEMsTUFBTSxHQUFHLEtBQUsrQixNQUFNQyxJQUFJLEdBQUdoQyxNQUFNLElBQUksTUFBTSxpQkFBaUI7QUFDcEYsRUFBRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtdXN0YVxcRGVza3RvcFxcbWVkYWktYXBwXFxzcmNcXHV0aWxzXFxhaUhlbHBlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tICdAZ29vZ2xlL2dlbmVyYXRpdmUtYWknO1xyXG5cclxuLy8gSW5pdGlhbGl6ZSB0aGUgR2VtaW5pIEFJIHdpdGggeW91ciBBUEkga2V5XHJcbmNvbnN0IGdlbkFJID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSShwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWSB8fCAnJyk7XHJcblxyXG4vLyBTbGVlcCBmdW5jdGlvbiBmb3IgcmV0cnkgbG9naWNcclxuY29uc3Qgc2xlZXAgPSAobXM6IG51bWJlcikgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XHJcblxyXG4vLyBUeXBlIGZvciBjb252ZXJzYXRpb24gbWVzc2FnZXNcclxuZXhwb3J0IGludGVyZmFjZSBDaGF0TWVzc2FnZSB7XHJcbiAgICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JztcclxuICAgIGNvbnRlbnQ6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlUmVzcG9uc2UgPSBhc3luYyAoY29udmVyc2F0aW9uSGlzdG9yeTogQ2hhdE1lc3NhZ2VbXSk6IFByb21pc2U8c3RyaW5nPiA9PiB7XHJcbiAgICBjb25zdCBtYXhSZXRyaWVzID0gMztcclxuICAgIGNvbnN0IGJhc2VEZWxheSA9IDEwMDA7IC8vIDEgc2Vjb25kXHJcbiAgICBcclxuICAgIGZvciAobGV0IGF0dGVtcHQgPSAxOyBhdHRlbXB0IDw9IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTdGFydGluZyBBSSByZXNwb25zZSBnZW5lcmF0aW9uIChhdHRlbXB0ICR7YXR0ZW1wdH0vJHttYXhSZXRyaWVzfSkuLi5gKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0FQSSBLZXkgcHJlc2VudDonLCAhIXByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbnZlcnNhdGlvbiBoaXN0b3J5IGxlbmd0aDonLCBjb252ZXJzYXRpb25IaXN0b3J5Lmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICAvLyBHZXQgdGhlIGdlbmVyYXRpdmUgbW9kZWwgd2l0aCBvcHRpbWl6ZWQgc2V0dGluZ3NcclxuICAgICAgICAgICAgY29uc3QgbW9kZWwgPSBnZW5BSS5nZXRHZW5lcmF0aXZlTW9kZWwoeyBcclxuICAgICAgICAgICAgICAgIG1vZGVsOiAnZ2VtaW5pLTEuNS1mbGFzaCcsXHJcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcclxuICAgICAgICAgICAgICAgICAgICB0b3BLOiA0MCxcclxuICAgICAgICAgICAgICAgICAgICB0b3BQOiAwLjk1LFxyXG4gICAgICAgICAgICAgICAgICAgIG1heE91dHB1dFRva2VuczogMTAwMCwgLy8gTGltaXQgcmVzcG9uc2UgbGVuZ3RoIGZvciBzcGVlZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ01vZGVsIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcblxyXG4gICAgICAgICAgICAvLyBCdWlsZCBjb252ZXJzYXRpb24gY29udGV4dCB3aXRoIHJlY2VudCBoaXN0b3J5IChsYXN0IDEwIG1lc3NhZ2VzIHRvIGF2b2lkIHRva2VuIGxpbWl0cylcclxuICAgICAgICAgICAgY29uc3QgcmVjZW50SGlzdG9yeSA9IGNvbnZlcnNhdGlvbkhpc3Rvcnkuc2xpY2UoLTEwKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIHByb21wdCB3aXRoIGNvbnZlcnNhdGlvbiBjb250ZXh0XHJcbiAgICAgICAgICAgIGxldCBjb252ZXJzYXRpb25UZXh0ID0gJyc7XHJcbiAgICAgICAgICAgIHJlY2VudEhpc3RvcnkuZm9yRWFjaChtc2cgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1zZy5yb2xlID09PSAndXNlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25UZXh0ICs9IGBTdHVkZW50OiAke21zZy5jb250ZW50fVxcbmA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvblRleHQgKz0gYE1lZEFJOiAke21zZy5jb250ZW50fVxcbmA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gYFlvdSBhcmUgTWVkQUksIGEgbWVkaWNhbCBlZHVjYXRpb24gQUkgYXNzaXN0YW50LiBNYWludGFpbiBjb252ZXJzYXRpb24gY29udGV4dCBhbmQgZ2l2ZSBjb25jaXNlLCBhY2N1cmF0ZSBhbnN3ZXJzLlxyXG5cclxuUHJldmlvdXMgY29udmVyc2F0aW9uOlxyXG4ke2NvbnZlcnNhdGlvblRleHR9XHJcblxyXG5QbGVhc2UgcmVzcG9uZCBhcyBNZWRBSSB0byBjb250aW51ZSB0aGlzIG1lZGljYWwgZWR1Y2F0aW9uIGNvbnZlcnNhdGlvbjpgO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NhbGxpbmcgZ2VuZXJhdGVDb250ZW50Li4uJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1vZGVsLmdlbmVyYXRlQ29udGVudChwcm9tcHQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ2VuZXJhdGVDb250ZW50IGNvbXBsZXRlZCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXN1bHQucmVzcG9uc2U7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZXNwb25zZSBleHRyYWN0ZWQnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUZXh0IGV4dHJhY3RlZCwgbGVuZ3RoOicsIHRleHQubGVuZ3RoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igb24gYXR0ZW1wdCAke2F0dGVtcHR9OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdHlwZTonLCBlcnJvcj8uY29uc3RydWN0b3I/Lm5hbWUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtZXNzYWdlOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgcmV0cnlhYmxlIGVycm9yICg1MDMgU2VydmljZSBVbmF2YWlsYWJsZSlcclxuICAgICAgICAgICAgY29uc3QgaXNSZXRyeWFibGUgPSBlcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJzUwMycpIHx8IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJ1NlcnZpY2UgVW5hdmFpbGFibGUnKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJ292ZXJsb2FkZWQnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChpc1JldHJ5YWJsZSAmJiBhdHRlbXB0IDwgbWF4UmV0cmllcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVsYXkgPSBiYXNlRGVsYXkgKiBNYXRoLnBvdygyLCBhdHRlbXB0IC0gMSk7IC8vIEV4cG9uZW50aWFsIGJhY2tvZmZcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBSZXRyeWluZyBpbiAke2RlbGF5fW1zLi4uYCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzbGVlcChkZWxheSk7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gSWYgbm90IHJldHJ5YWJsZSBvciBtYXggcmV0cmllcyByZWFjaGVkLCB0aHJvdyBlcnJvclxyXG4gICAgICAgICAgICBpZiAoaXNSZXRyeWFibGUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIEFJIHNlcnZpY2UgaXMgdGVtcG9yYXJpbHkgb3ZlcmxvYWRlZC4gUGxlYXNlIHdhaXQgYSBtb21lbnQgYW5kIHRyeSBhZ2Fpbi4nKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGdlbmVyYXRlIEFJIHJlc3BvbnNlLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZW5lcmF0ZSByZXNwb25zZSBhZnRlciBtdWx0aXBsZSBhdHRlbXB0cy4nKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUlucHV0ID0gKGlucHV0OiBzdHJpbmcpOiBib29sZWFuID0+IHtcclxuICAgIC8vIEJhc2ljIHZhbGlkYXRpb24gZm9yIHVzZXIgaW5wdXRcclxuICAgIHJldHVybiBpbnB1dC50cmltKCkubGVuZ3RoID4gMCAmJiBpbnB1dC50cmltKCkubGVuZ3RoIDw9IDEwMDA7IC8vIEFkZCBtYXggbGVuZ3RoXHJcbn07Il0sIm5hbWVzIjpbIkdvb2dsZUdlbmVyYXRpdmVBSSIsImdlbkFJIiwicHJvY2VzcyIsImVudiIsIkdFTUlOSV9BUElfS0VZIiwic2xlZXAiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImdlbmVyYXRlUmVzcG9uc2UiLCJjb252ZXJzYXRpb25IaXN0b3J5IiwibWF4UmV0cmllcyIsImJhc2VEZWxheSIsImF0dGVtcHQiLCJjb25zb2xlIiwibG9nIiwibGVuZ3RoIiwibW9kZWwiLCJnZXRHZW5lcmF0aXZlTW9kZWwiLCJnZW5lcmF0aW9uQ29uZmlnIiwidGVtcGVyYXR1cmUiLCJ0b3BLIiwidG9wUCIsIm1heE91dHB1dFRva2VucyIsInJlY2VudEhpc3RvcnkiLCJzbGljZSIsImNvbnZlcnNhdGlvblRleHQiLCJmb3JFYWNoIiwibXNnIiwicm9sZSIsImNvbnRlbnQiLCJwcm9tcHQiLCJyZXN1bHQiLCJnZW5lcmF0ZUNvbnRlbnQiLCJyZXNwb25zZSIsInRleHQiLCJlcnJvciIsIm5hbWUiLCJFcnJvciIsIm1lc3NhZ2UiLCJTdHJpbmciLCJpc1JldHJ5YWJsZSIsImluY2x1ZGVzIiwiZGVsYXkiLCJNYXRoIiwicG93IiwidmFsaWRhdGVJbnB1dCIsImlucHV0IiwidHJpbSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/utils/aiHelper.ts\n");

/***/ }),

/***/ "@google/generative-ai":
/*!****************************************!*\
  !*** external "@google/generative-ai" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@google/generative-ai");;

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fai&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cai.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();